define(["require","exports","tslib","external/classnames","react","external/react-redux","modules/clean/annotations/preview_image_annotations_toolbar","modules/clean/comments/action_creators","modules/clean/comments/logging","modules/clean/comments/store","modules/clean/comments/utils","modules/clean/comments/constants","modules/clean/react/previews/preview_toolbar","modules/clean/react/previews/preview_toolbar_region_creation","modules/clean/previews/preview_toolbar_store","modules/clean/react/file_viewer/sidebar_helpers","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/data/selectors"],function(e,o,n,t,i,a,r,l,s,c,p,u,d,b,g,C,m,v){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),t=n.__importDefault(t),i=n.__importDefault(i),l=n.__importDefault(l),s=n.__importStar(s),c=n.__importDefault(c),p=n.__importStar(p);var _=(function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.getComponentState=function(){return{canAnnotate:p.canAnnotate(o.props.isFullscreen),hideToolbar:g.PreviewToolbarStore.state.hideToolbar}},o.state=o.getComponentState(),o.onStateChange=function(){return o.setState(o.getComponentState())},o.logRegionCreationClick=function(e){s.logEvent(e,u.FileActivityLogClientOriginType.ANNOTATION_MODE_BUTTON_IN_TOOLBAR)},o.onRegionCreationClick=function(){o.logRegionCreationClick(u.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_ENABLED),o.enableRegionCreation()},o.onRegionCreationDoneClick=function(){o.logRegionCreationClick(u.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_DISABLED),o.disableRegionCreation()},o.onSidebarOpen=function(e){var n=o.props;(0,n.onSidebarOpen)(n.previewToolbarProps.docType,e)},o.onSidebarClose=function(e){var n=o.props;(0,n.onSidebarClose)(n.previewToolbarProps.docType,e)},o}return n.__extends(o,e),o.prototype.componentDidMount=function(){this.unsubscribeCommentsStore=c.default.listen(this.onStateChange),this.unsubscribePreviewToolbarStore=g.PreviewToolbarStore.listen(this.onStateChange)},o.prototype.componentWillUnmount=function(){this.unsubscribeCommentsStore(),this.unsubscribePreviewToolbarStore(),this.props.isAnnotationRegionEnabled&&this.disableRegionCreation()},o.prototype.enableRegionCreation=function(){l.default.setRegionCreationEnabled(!0);var e=this.props.enableRegionCreation;e&&e()},o.prototype.disableRegionCreation=function(){l.default.setRegionCreationEnabled(!1);var e=this.props.disableRegionCreation;e&&e()},o.prototype.render=function(){var e=this.props.previewToolbarProps,o=this.props.isAnnotationRegionEnabled&&this.state.canAnnotate,a=this.state.canAnnotate&&!this.props.forceDisableRegionAnnotation,l=null;if(this.props.shouldUseImageToolbar)o||(l=i.default.createElement(r.PreviewImageAnnotationsToolbar,n.__assign({},e,{ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,canEnableRegionCreation:a})));else{var s=!!e.isHidden||o||this.state.hideToolbar;l=i.default.createElement(d.PreviewToolbar,n.__assign({},e,{isSidebarOpen:this.props.isSidebarOpen,onSidebarOpen:this.onSidebarOpen,onSidebarClose:this.onSidebarClose,ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,isHidden:s,shouldDisplayRegionCreationButton:a}))}var c=null;o&&(c=i.default.createElement(b.PreviewToolbarRegionCreation,{onRegionCreationDoneClick:this.onRegionCreationDoneClick}));var p=t.default("preview-toolbar-container",{"preview-toolbar-container--elevated":!!this.props.elevateToolbar});return i.default.createElement("div",{className:p},l,c)},o})(i.default.Component);o.PreviewToolbarContainerInternal=_,o.PreviewToolbarContainer=a.connect(function(e){return{isAnnotationRegionEnabled:v.getIsAnnotationRegionEnabled(e)}},n.__assign({},C.mapDispatchToProps,{enableRegionCreation:m.enableRegionCreation,disableRegionCreation:m.disableRegionCreation}),void 0,{withRef:!0})(_)});
//# sourceMappingURL=preview_toolbar_container_component.min.js-vflKNu6Ox.map