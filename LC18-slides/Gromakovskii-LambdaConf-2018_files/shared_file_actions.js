define(["require","exports","tslib","react","modules/clean/abuse/report_flag","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/more_dropdown","modules/clean/react/size_class/constants","modules/clean/react/open_in_app/button","modules/clean/react/paper/open_in_paper_button","modules/clean/react/share_download/button","modules/clean/react/share_download/util","modules/clean/react/sign_in/button","modules/clean/react/title_bar/controls_container","modules/clean/react/user_notifications/dropdown","modules/clean/sharing/api/client","modules/clean/sharing/delete_link_modal","modules/core/browser","modules/clean/react/paper/utils"],function(e,n,t,r,o,i,a,l,s,u,p,c,d,h,m,f,_,k,w,P){"use strict";function v(e){return function(){return i.logUserAction(e,a.UserActionContext.TitleBarMain)}}Object.defineProperty(n,"__esModule",{value:!0}),r=t.__importDefault(r),w=t.__importStar(w);var g=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={openInPaperButtonVariant:P.OpenInPaperButtonVariant.Off},n.removeShareLink=function(){var e=new _.ShareApiClient({userId:n.props.sharePermission.canRemoveLinkUids[0]});return k.deleteLinkWithConfirmLegacy({client:e,contentName:n.props.file.filename,onCancel:null,onDeleteLink:function(){return w.redirect("/home")},tkey:n.getTkey()})},n.isDownloadAllowed=function(){return n.props.sharePermission&&n.props.sharePermission.canDownloadRoles.length>0},n}return t.__extends(n,e),n.prototype.componentDidMount=function(){this.setState({openInPaperButtonVariant:P.getOpenInPaperButtonVariant({file:this.props.file,user:this.props.user,sharedLink:this.props.sharedLinkInfo.url})})},n.prototype.getTkey=function(){return this.props.sharePermission&&this.props.sharePermission.canRemoveLinkUids.length>0?this.props.shareToken.linkKey:null},n.prototype.render=function(){var e=this.props,n=e.file,t=e.sharedLinkInfo,i=e.sharePermission,_=e.shareToken,k=e.showOpenInAppButton,w=e.shouldDisplayActionButtons,g=e.sizeClass,L=e.user;if(g!==s.SizeClass.Large)return r.default.createElement(l.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,renderSignIn:!L,sizeClass:g,shareDownloadOptions:d.getDownloadOptions(i,t,_,n)});var B=this.isDownloadAllowed()&&this.state.openInPaperButtonVariant===P.OpenInPaperButtonVariant.Button?r.default.createElement(p.OpenInPaperButton,{file:n,user:L,sharedLink:t.url,hideCallout:!1}):null;return r.default.createElement(m.TitleBarControlsContainer,null,t.hasPublicAudienceOrVisibility!==!1?r.default.createElement(o.ReportFlag,{sharedLink:t.url}):null,k&&w?r.default.createElement(u.OpenInAppButton,{urls:this.props.file.open_in_app_data,userActionContext:a.UserActionContext.TitleBarMain}):null,L?null:r.default.createElement(h.SignInButton,{isPrimaryButton:!k,onClick:v(a.UserAction.SignIn)}),w?B:null,_&&i&&w?r.default.createElement(c.ShareDownloadButton,{copyable:n,location:a.FileViewerPane.PreviewContent,sharedLinkInfo:t,sharePermission:i,shareToken:_,user:L}):null,r.default.createElement(l.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,sizeClass:g,user:L||void 0,sharedLink:t.url,showOpenInPaper:this.state.openInPaperButtonVariant===P.OpenInPaperButtonVariant.Ellipsis}),L?r.default.createElement("div",{className:"react-title-bar__divider"}):null,L?r.default.createElement(f.UserNotificationsDropdown,{isPagelet:!1,onClick:v(a.UserAction.ClickNotifications)}):null)},n.defaultProps={user:null},n})(r.default.Component);n.SharedFileActions=g});
//# sourceMappingURL=shared_file_actions.min.js-vflDU-bq8.map